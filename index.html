<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YZDBTKS v12.7 - KararlÄ± Hesap Sistemi</title>
    
    <!-- FAVICON -->
    <link rel="icon" href="logo.png" type="image/png">

    <!-- KÃ¼tÃ¼phaneler -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        try {
            tailwind.config = {
                darkMode: 'class',
                theme: {
                    extend: {
                        colors: {
                            brand: { 50: '#f0fdf4', 100: '#dcfce7', 500: '#10b981', 600: '#059669', 700: '#047857', 900: '#064e3b' },
                            dark: { bg: '#111827', panel: '#1f293b', border: '#374151' }
                        },
                        fontFamily: { sans: ['Plus Jakarta Sans', 'Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                        animation: { 'float': 'float 6s ease-in-out infinite' },
                        keyframes: { float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } } }
                    }
                }
            }
        } catch (e) { console.warn("Tailwind config error", e); }
    </script>

    <style>
        :root { --color-brand-50: #f0fdf4; --color-brand-100: #dcfce7; --color-brand-500: #10b981; --color-brand-600: #059669; --color-dark-bg: #111827; --color-dark-panel: #1f293b; --color-dark-border: #374151; }
        [data-theme="cyberpunk"] { --color-brand-50: #1a1a00; --color-brand-100: #333300; --color-brand-500: #fcee0a; --color-brand-600: #d4c806; --color-dark-bg: #000000; --color-dark-panel: #09090b; --color-dark-border: #333333; }
        [data-theme="ocean"] { --color-brand-50: #f0f9ff; --color-brand-100: #e0f2fe; --color-brand-500: #0ea5e9; --color-brand-600: #0284c7; }
        [data-theme="sunset"] { --color-brand-50: #fff7ed; --color-brand-100: #ffedd5; --color-brand-500: #f97316; --color-brand-600: #ea580c; }
        [data-theme="lavender"] { --color-brand-50: #f5f3ff; --color-brand-100: #ede9fe; --color-brand-500: #8b5cf6; --color-brand-600: #7c3aed; }
        [data-theme="gamer"] { --color-brand-50: #eef2f5; --color-brand-100: #c7d5e0; --color-brand-500: #66c0f4; --color-brand-600: #0070d1; --color-dark-bg: #121212; --color-dark-panel: #1b2838; --color-dark-border: #2a475e; }
        [data-theme="turkey"] { --color-brand-50: #fff5f5; --color-brand-100: #fed7d7; --color-brand-500: #E30A17; --color-brand-600: #c53030; --color-dark-bg: #1a0505; --color-dark-panel: #2d0a0a; --color-dark-border: #451a1a; }
        
        [data-theme="turkey"] body::after { content: ''; position: fixed; bottom: 20px; left: 100px; width: 60px; height: 40px; background-image: url('https://upload.wikimedia.org/wikipedia/commons/b/b4/Flag_of_Turkey.svg'); background-size: contain; background-repeat: no-repeat; opacity: 0.8; z-index: 100; pointer-events: none; }
        [data-theme="turkey"] .glass-panel { border-top: 3px solid #E30A17; }
        [data-theme="cyberpunk"] .cyber-border { border: 1px solid #fcee0a; box-shadow: 0 0 10px rgba(252, 238, 10, 0.2); }
        [data-theme="cyberpunk"] .text-brand-500 { text-shadow: 0 0 8px rgba(252, 238, 10, 0.6); }

        body { font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .modal { transition: opacity 0.2s ease, transform 0.2s ease; opacity: 0; pointer-events: none; transform: scale(0.95); }
        .modal.active { opacity: 1; pointer-events: auto; transform: scale(1); }
        .radar-spinner { width: 50px; height: 50px; border-radius: 50%; border: 3px solid rgba(var(--color-brand-500), 0.1); border-top-color: var(--color-brand-500); animation: spin 1s infinite linear; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .scan-line { position: absolute; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--color-brand-500), transparent); box-shadow: 0 0 20px var(--color-brand-500); top: 0; left: 0; animation: scanning 2s infinite ease-in-out; z-index: 10; }
        @keyframes scanning { 0% { top: 0%; opacity: 0; } 15% { opacity: 1; } 85% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
        .bento-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.4); border-radius: 1.25rem; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .dark .bento-card { background: rgba(30, 41, 59, 0.6); border-color: rgba(255, 255, 255, 0.05); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2); }
        .bento-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-glow); border-color: rgba(var(--color-brand-500), 0.3); }
        .viewfinder { position: relative; }
        .viewfinder::before, .viewfinder::after, .viewfinder-inner::before, .viewfinder-inner::after { content: ''; position: absolute; width: 30px; height: 30px; border-color: var(--color-brand-500); border-style: solid; transition: all 0.3s; }
        .viewfinder::before { top: 0; left: 0; border-width: 3px 0 0 3px; border-top-left-radius: 8px; }
        .viewfinder::after { top: 0; right: 0; border-width: 3px 3px 0 0; border-top-right-radius: 8px; }
        .viewfinder-inner::before { bottom: 0; left: 0; border-width: 0 0 3px 3px; border-bottom-left-radius: 8px; }
        .viewfinder-inner::after { bottom: 0; right: 0; border-width: 0 3px 3px 0; border-bottom-right-radius: 8px; }
        .ambient-blob { position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.4; z-index: 0; animation: blob 10s infinite; pointer-events: none; }
        .blob-1 { top: -10%; left: -10%; width: 400px; height: 400px; background-color: var(--color-brand-500); animation-delay: 0s; }
        .blob-2 { bottom: -10%; right: -10%; width: 400px; height: 400px; background-color: #3b82f6; animation-delay: 2s; }
        .blob-3 { top: 40%; left: 40%; width: 300px; height: 300px; background-color: #a855f7; animation-delay: 4s; opacity: 0.2; }
        .header-fixed-white { background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #e5e7eb; color: #1f2937; }
        .dark .header-fixed-white { background-color: rgba(30, 41, 59, 0.95); border-bottom: 1px solid #374151; color: #f3f4f6; }
        .nav-text-dark { color: #374151; }
        .nav-text-dark:hover { color: #111827; background-color: #f3f4f6; }
        #global-loader { position: fixed; inset: 0; background: #111827; z-index: 99999; display: flex; justify-content: center; align-items: center; flex-direction: column; transition: opacity 0.5s; }
        
        .model-card-active { border: 2px solid var(--color-brand-500) !important; background-color: rgba(var(--color-brand-500), 0.05) !important; }
        .model-btn-active { background-color: var(--color-brand-500) !important; color: white !important; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-dark-bg dark:text-gray-200 h-screen overflow-hidden flex flex-col transition-colors duration-300 font-sans selection:bg-brand-500 selection:text-white relative" onclick="closeProfileMenu(event)">

    <div id="global-loader"><div class="loader-spin"></div><div class="text-white mt-4 font-bold tracking-widest text-sm">SÄ°STEM YÃœKLENÄ°YOR...</div><button onclick="document.getElementById('global-loader').style.display='none'" class="mt-4 text-xs text-gray-500 underline cursor-pointer hover:text-white">TakÄ±lÄ±rsa TÄ±kla</button></div>
    <div class="fixed inset-0 overflow-hidden pointer-events-none"><div class="ambient-blob blob-1"></div><div class="ambient-blob blob-2"></div><div class="ambient-blob blob-3"></div></div>

    <!-- MAIN NAVBAR -->
    <nav class="h-20 header-fixed-white sticky top-0 z-50 px-4 md:px-8 flex items-center justify-between shadow-sm shrink-0">
        <div class="flex items-center gap-3 cursor-pointer" onclick="scrollToSection('dashboard')">
            <div class="w-10 h-10 rounded-xl overflow-hidden shadow-lg hover:scale-105 transition-transform bg-white">
                <img src="logo.png" class="w-full h-full object-cover" onerror="this.src='https://cdn-icons-png.flaticon.com/512/188/188333.png'">
            </div>
            <div><h1 class="font-extrabold text-xl tracking-tight leading-none">YZDBTKS</h1><span class="text-[10px] text-brand-600 dark:text-brand-400 font-bold tracking-[0.25em] uppercase hidden sm:block">AI Solutions</span></div>
        </div>
        <div class="hidden lg:flex items-center bg-gray-100 dark:bg-white/5 p-1 rounded-2xl border border-gray-200 dark:border-white/5">
            <button onclick="scrollToSection('dashboard')" class="px-4 py-2 rounded-xl text-sm font-bold text-brand-600 dark:text-brand-400 bg-white dark:bg-white/10 shadow-sm transition-all hover:bg-brand-50 dark:hover:bg-brand-900/20">Panel</button>
            <button onclick="scrollToSection('my-plants')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">Bitkilerim</button>
            <button onclick="scrollToSection('history')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">GeÃ§miÅŸ</button>
            <button onclick="scrollToSection('models')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">Modeller</button>
            <button id="nav-admin-link" onclick="scrollToSection('admin-panel')" class="hidden px-4 py-2 rounded-xl text-sm font-bold text-red-600 hover:bg-red-50 dark:hover:bg-white/5 transition-colors">YÃ¶netim</button>
            <button onclick="scrollToSection('settings')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">Ayarlar</button>
            <button onclick="scrollToSection('about')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">HakkÄ±nda</button>
            <button onclick="scrollToSection('who-we-are')" class="px-4 py-2 rounded-xl text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-brand-600 dark:hover:text-white transition-colors">Ekip</button>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="toggleTheme()" class="w-10 h-10 rounded-full flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/5"><i class="fas fa-moon dark:hidden"></i><i class="fas fa-sun hidden dark:block text-yellow-500"></i></button>
            <button onclick="toggleNotifications()" class="relative w-10 h-10 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/5"><i class="fas fa-bell"></i><span class="absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-dark-panel"></span></button>
            <div id="desktop-auth" class="flex items-center"></div>
            <button onclick="toggleMobileMenu()" class="lg:hidden w-10 h-10 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-white/5 transition-colors"><i class="fas fa-bars text-xl"></i></button>
        </div>
    </nav>
    
    <div id="notification-panel" class="hidden absolute top-20 right-4 lg:right-24 w-80 bg-white dark:bg-dark-panel rounded-2xl shadow-2xl border border-gray-100 dark:border-dark-border z-[60] overflow-hidden fade-in">
        <div class="p-4 border-b border-gray-100 dark:border-dark-border flex justify-between items-center bg-gray-50 dark:bg-white/5"><h3 class="font-bold text-gray-800 dark:text-white">Bildirimler</h3><span class="text-xs bg-red-500 text-white px-2 py-0.5 rounded-full">2</span></div>
        <div class="max-h-64 overflow-y-auto">
            <div class="p-4 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer border-b border-gray-50 dark:border-white/5"><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-xs"><i class="fas fa-check"></i></div><div><p class="text-xs text-gray-400 mb-0.5">10:42</p><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Analiz tamamlandÄ±.</p></div></div></div>
            <div class="p-4 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer"><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-xs"><i class="fas fa-info"></i></div><div><p class="text-xs text-gray-400 mb-0.5">DÃ¼n</p><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Sistem v12.7 yÃ¼klendi.</p></div></div></div>
        </div>
    </div>

    <div id="profile-dropdown" class="hidden absolute top-20 right-4 w-72 bg-white dark:bg-dark-panel rounded-2xl shadow-2xl border border-gray-100 dark:border-dark-border z-[70] overflow-hidden fade-in">
         <div class="p-5 border-b border-gray-100 dark:border-dark-border flex items-center gap-4 bg-gray-50 dark:bg-white/5"><img id="dropdown-avatar" src="" class="w-12 h-12 rounded-full border-2 border-brand-500"><div><h4 id="dropdown-name" class="font-bold text-gray-900 dark:text-white truncate max-w-[150px]"></h4><p id="dropdown-email" class="text-xs text-gray-500 truncate max-w-[150px]"></p></div></div>
         <div class="p-2 space-y-1"><div id="verify-section" class="px-4 py-2 flex items-center justify-between"><span class="text-sm font-medium text-gray-600 dark:text-gray-300">Durum:</span><span id="verify-badge" class="text-xs font-bold px-2 py-0.5 rounded-md bg-yellow-100 text-yellow-700">OnaysÄ±z</span></div><button id="verify-btn" onclick="verifyEmail()" class="w-full text-left px-4 py-2.5 text-sm font-medium text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 rounded-lg flex items-center gap-2"><i class="fas fa-envelope-open-text"></i> E-posta DoÄŸrula</button><button onclick="openChangePasswordModal()" class="w-full text-left px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg flex items-center gap-2"><i class="fas fa-key"></i> Åžifreyi DeÄŸiÅŸtir</button><div class="border-t border-gray-100 dark:border-dark-border my-1"></div><button onclick="logout()" class="w-full text-left px-4 py-2.5 text-sm font-bold text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center gap-2"><i class="fas fa-sign-out-alt"></i> Ã‡Ä±kÄ±ÅŸ Yap</button></div>
    </div>

    <div id="mobile-menu" class="fixed inset-0 bg-white/95 dark:bg-dark-panel/95 backdrop-blur-xl z-[60] flex flex-col p-6 hidden transition-all">
        <div class="flex justify-between items-center mb-8"><span class="font-bold text-2xl dark:text-white">MenÃ¼</span><button onclick="toggleMobileMenu()" class="text-3xl text-gray-500"><i class="fas fa-times"></i></button></div>
        <div id="mobile-auth-container" class="flex flex-col gap-3 mb-6"></div>
        <div class="flex-1 overflow-y-auto space-y-4 text-center">
             <button onclick="scrollToSection('dashboard')" class="text-xl font-bold text-brand-600 block w-full py-2">Panel</button>
             <button onclick="scrollToSection('my-plants')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">Bitkilerim</button>
             <button onclick="scrollToSection('history')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">GeÃ§miÅŸ</button>
             <button onclick="scrollToSection('models')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">Modeller</button>
             <button id="mobile-admin-link" onclick="scrollToSection('admin-panel')" class="text-xl font-bold text-red-600 block w-full py-2 hidden">YÃ¶netim Paneli</button>
             <button onclick="scrollToSection('settings')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">Ayarlar</button>
             <button onclick="scrollToSection('about')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">HakkÄ±nda</button>
             <button onclick="scrollToSection('who-we-are')" class="text-xl font-medium text-gray-600 dark:text-gray-300 block w-full py-2">Ekip</button>
        </div>
        <button onclick="openAuthModal('login')" class="w-full py-4 bg-brand-600 text-white rounded-2xl font-bold text-lg shadow-lg mb-4">GiriÅŸ Yap</button>
        <button onclick="openAuthModal('register')" class="w-full py-4 bg-white border-2 border-brand-600 text-brand-600 rounded-2xl font-bold text-lg shadow-lg">KayÄ±t Ol</button>
    </div>

    <main class="flex-1 h-full overflow-y-auto p-4 md:p-8 lg:p-12 relative scroll-smooth z-10 w-full" id="main-scroll-area">
        <header class="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4 fade-in">
            <div><h2 class="text-2xl md:text-3xl font-black text-gray-900 dark:text-white tracking-tight">HoÅŸgeldiniz ðŸ‘‹</h2><p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">YZDBTKS Kontrol Paneli ve Analiz Merkezi</p></div>
            <div class="flex items-center gap-3 bg-white dark:bg-white/5 p-1.5 rounded-2xl border border-gray-200 dark:border-white/10 shadow-sm"><span class="px-3 py-1 rounded-xl bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Sistem Aktif</span><div class="h-4 w-px bg-gray-200 dark:bg-white/10"></div><span class="text-xs font-medium text-gray-500 dark:text-gray-400 px-2" id="current-date">--</span></div>
        </header>

        <section id="dashboard" class="scroll-mt-24 fade-in">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bento-card p-6 flex flex-col gap-4 group"><div class="flex justify-between items-center"><div class="w-12 h-12 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-xl flex items-center justify-center text-xl"><i class="fas fa-camera"></i></div><span class="text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-2.5 py-1 rounded-lg">+12%</span></div><div><h3 class="text-3xl font-black text-gray-900 dark:text-white">128</h3><p class="text-xs font-bold text-gray-400 uppercase tracking-widest">GÃ¼nlÃ¼k Analiz</p></div></div>
                <div class="bento-card p-6 flex flex-col gap-4 group"><div class="flex justify-between items-center"><div class="w-12 h-12 bg-green-50 dark:bg-green-900/20 text-green-600 rounded-xl flex items-center justify-center text-xl"><i class="fas fa-leaf"></i></div><span class="text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-2.5 py-1 rounded-lg">+5%</span></div><div><h3 class="text-3xl font-black text-gray-900 dark:text-white">%98.4</h3><p class="text-xs font-bold text-gray-400 uppercase tracking-widest">DoÄŸruluk</p></div></div>
                <div class="bento-card p-6 flex flex-col gap-4 group"><div class="flex justify-between items-center"><div class="w-12 h-12 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl flex items-center justify-center text-xl"><i class="fas fa-virus"></i></div><span class="text-xs font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2.5 py-1 rounded-lg">-2%</span></div><div><h3 class="text-3xl font-black text-gray-900 dark:text-white">42</h3><p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Tespit</p></div></div>
                <div class="bento-card p-6 flex flex-col gap-4 group"><div class="flex justify-between items-center"><div class="w-12 h-12 bg-purple-50 dark:bg-purple-900/20 text-purple-600 rounded-xl flex items-center justify-center text-xl"><i class="fas fa-layer-group"></i></div><span class="text-xs font-bold text-gray-500 bg-gray-100 dark:bg-white/10 px-2.5 py-1 rounded-lg">Aktif</span></div><div><h3 class="text-3xl font-black text-gray-900 dark:text-white">v2.1</h3><p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Sistem</p></div></div>
            </div>
            <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                <div class="xl:col-span-2 bento-card p-2 shadow-xl flex flex-col h-auto min-h-[500px] lg:h-[650px] overflow-hidden border-2 border-transparent hover:border-brand-500/20 transition-colors">
                    <div class="px-6 py-5 border-b border-gray-100 dark:border-dark-border flex justify-between items-center bg-gray-50/50 dark:bg-white/5 backdrop-blur-md">
                        <div class="flex items-center gap-3"><span class="relative flex h-2.5 w-2.5"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-brand-500"></span></span><h2 class="font-bold text-gray-800 dark:text-white text-xs md:text-sm tracking-wide uppercase">GÃ¶rÃ¼ntÃ¼ Ä°ÅŸleme</h2>
                        <select id="ai-model-select" onchange="setActiveModel(this.value)" class="ml-2 bg-gray-100 dark:bg-white/10 text-xs font-bold rounded-lg border-none focus:ring-0 cursor-pointer p-1"><option value="local">YZDBHTS (Yerel)</option><option value="gemini">Gemini Pro (Bulut)</option></select>
                        </div>
                        <button onclick="resetAnalysis()" class="text-xs font-bold text-gray-500 hover:text-brand-600 dark:hover:text-white transition-colors flex items-center gap-2 bg-gray-100 dark:bg-white/10 px-3 py-1.5 rounded-lg hover:shadow-md cursor-pointer"><i class="fas fa-redo"></i> <span class="hidden sm:inline">TEMÄ°ZLE</span></button>
                    </div>
                    <div class="flex-1 relative bg-gray-900 flex items-center justify-center group overflow-hidden rounded-b-xl min-h-[400px]">
                        <div class="viewfinder absolute inset-6 md:inset-12 opacity-30 pointer-events-none"><div class="viewfinder-inner w-full h-full"></div></div>
                        <div id="drop-zone" class="text-center z-10 p-6 transition-all duration-500 w-full"><div class="w-20 h-20 md:w-32 md:h-32 bg-white/5 rounded-[2rem] flex items-center justify-center mx-auto mb-6 backdrop-blur-md border border-white/10 shadow-2xl animate-float"><i class="fas fa-dna text-4xl md:text-6xl text-brand-400"></i></div><h3 class="text-white text-2xl md:text-4xl font-black mb-3">GÃ¶rÃ¼ntÃ¼ YÃ¼kle</h3><div class="flex flex-col sm:flex-row gap-4 justify-center w-full px-4"><button onclick="document.getElementById('file-input').click()" class="bg-brand-600 hover:bg-brand-500 text-white px-8 py-4 rounded-2xl font-bold text-sm shadow-lg hover:shadow-brand-500/40 hover:-translate-y-1 flex items-center justify-center gap-3 w-full sm:w-auto cursor-pointer"><i class="fas fa-folder-open text-lg"></i> Dosya SeÃ§</button><button onclick="document.getElementById('camera-input').click()" class="bg-white/10 hover:bg-white/20 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all backdrop-blur-md border border-white/10 hover:border-white/30 hover:-translate-y-1 hover:shadow-lg flex items-center justify-center gap-3 w-full sm:w-auto cursor-pointer"><i class="fas fa-camera text-lg"></i> Kamera</button></div><input type="file" id="file-input" class="hidden" accept="image/*" onchange="handleFile(event)"><input type="file" id="camera-input" class="hidden" accept="image/*" capture="environment" onchange="handleFile(event)"></div>
                        <img id="preview-img" class="hidden w-full h-full object-contain z-10" src=""><div id="scanner-overlay" class="hidden absolute inset-0 bg-black/80 z-20 backdrop-blur-sm flex flex-col items-center justify-center"><div class="scan-line"></div><div class="radar-spinner mb-8"></div><div class="text-center"><h4 class="text-brand-400 font-black text-3xl mb-2 tracking-[0.2em] animate-pulse">ANALÄ°Z EDÄ°LÄ°YOR</h4></div></div>
                    </div>
                </div>
                <div class="xl:col-span-1 flex flex-col gap-6 h-[650px]">
                    <div class="bento-card flex-1 flex flex-col overflow-hidden relative shadow-lg border-t-4 border-t-brand-500 min-h-[400px]">
                        <div class="p-5 border-b border-gray-100 dark:border-dark-border flex justify-between items-center bg-gray-50/50 dark:bg-white/5"><h3 class="font-extrabold text-lg text-gray-800 dark:text-white">Rapor</h3></div>
                        <div id="res-empty" class="absolute inset-0 top-16 flex flex-col items-center justify-center bg-white/95 dark:bg-dark-panel z-10"><div class="w-20 h-20 bg-gray-100 dark:bg-white/5 rounded-3xl flex items-center justify-center mb-4 text-gray-300 dark:text-gray-600"><i class="fas fa-file-medical-alt text-3xl"></i></div><p class="text-sm font-extrabold text-gray-400 uppercase tracking-widest">Veri Bekleniyor</p></div>
                        <div id="res-content" class="hidden flex-1 flex flex-col p-6 overflow-y-auto custom-scrollbar"><div class="flex items-start gap-4 mb-6"><div id="res-icon-bg" class="w-14 h-14 rounded-2xl flex shrink-0 items-center justify-center bg-gray-100 text-2xl shadow-md"><i id="res-icon" class="fas fa-question"></i></div><div><span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Durum</span><h2 id="res-title" class="text-lg font-black text-gray-900 dark:text-white leading-tight mt-1">--</h2></div></div><div class="space-y-4"><div class="relative pl-4 border-l-2 border-gray-200 dark:border-dark-border"><h4 class="text-xs font-bold text-gray-900 dark:text-white mb-1 uppercase">Bulgular</h4><p id="res-desc" class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed">--</p></div><div class="bg-blue-50 dark:bg-blue-900/10 p-4 rounded-2xl border border-blue-100 dark:border-blue-900/20"><h4 class="text-xs font-bold text-blue-900 dark:text-blue-100 mb-2 uppercase"><i class="fas fa-notes-medical mr-1"></i> Tedavi</h4><p id="res-action" class="text-sm text-blue-800 dark:text-blue-200 leading-relaxed">--</p></div></div><button onclick="saveResult()" class="mt-8 w-full py-3.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl font-bold text-sm shadow-xl flex items-center justify-center gap-2"><i class="fas fa-save"></i> Kaydet ve Ä°ndir</button></div>
                    </div>
                    <div class="bento-card p-6 h-48 flex flex-col justify-between relative overflow-hidden"><div class="flex justify-between items-center mb-2 relative z-10"><div><h3 class="font-bold text-gray-800 dark:text-white text-xs uppercase tracking-wider">HaftalÄ±k Trend</h3></div><span class="text-green-600 bg-green-50 px-2.5 py-1 rounded-lg text-xs font-black dark:bg-green-500/10 dark:text-green-400">+14.2%</span></div><div class="flex-1 w-full relative z-10"><canvas id="miniChart"></canvas></div></div>
                </div>
            </div>
        </section>

        <section id="my-plants" class="space-y-6 pb-24 scroll-mt-24"><div class="flex justify-between items-center mb-8"><h2 class="text-3xl font-extrabold text-gray-900 dark:text-white">Bitkilerim</h2><button onclick="openAddPlantModal()" class="px-5 py-2.5 bg-brand-600 text-white rounded-xl text-sm font-bold shadow-lg flex items-center gap-2 cursor-pointer"><i class="fas fa-plus"></i> Bitki Ekle</button></div><div id="my-plants-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div><div id="my-plants-empty" class="bento-card p-16 text-center flex flex-col items-center"><div class="w-20 h-20 bg-gray-100 dark:bg-white/5 rounded-full flex items-center justify-center mb-4 text-gray-300"><i class="fas fa-seedling text-3xl"></i></div><p class="text-gray-500 dark:text-gray-400 font-medium text-lg">HenÃ¼z bitki eklenmemiÅŸ.</p></div></section>
        <section id="history" class="space-y-6 pb-24 scroll-mt-24"><div class="flex justify-between items-center mb-8"><h2 class="text-3xl font-extrabold text-gray-900 dark:text-white">GeÃ§miÅŸ</h2><button onclick="clearHistory()" class="text-sm text-red-500 font-bold border border-red-200 px-4 py-2 rounded-lg hover:bg-red-50 transition-colors">Temizle</button></div><div class="bento-card overflow-hidden shadow-lg overflow-x-auto"><table class="w-full text-left text-sm text-gray-600 dark:text-gray-400 min-w-[600px]"><thead class="bg-gray-50 dark:bg-black/20 text-xs font-bold uppercase tracking-wider"><tr><th class="px-8 py-5">Tarih</th><th class="px-8 py-5">SonuÃ§</th><th class="px-8 py-5">Skor</th></tr></thead><tbody id="history-table-body" class="divide-y divide-gray-100 dark:divide-dark-border"></tbody></table><div id="history-empty" class="p-12 text-center hidden"><p class="text-gray-400">KayÄ±t yok.</p></div></div></section>
        <section id="models" class="space-y-6 pb-24 scroll-mt-24"><h2 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8">Modeller</h2><div class="grid grid-cols-1 gap-6"><div id="card-local" class="bento-card p-8 flex flex-col md:flex-row gap-8 items-start border-l-4 border-l-brand-500 cursor-pointer transition-all hover:bg-brand-50 dark:hover:bg-brand-900/10" onclick="setActiveModel('local')"><div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-brand-500 to-blue-600 flex items-center justify-center text-white text-4xl shadow-xl shrink-0"><i class="fas fa-cube"></i></div><div class="flex-1"><div class="flex items-center gap-4 mb-2"><h3 class="text-2xl font-bold text-gray-900 dark:text-white">YZDBHTS_colab.h5</h3><button id="btn-local" class="px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-black border border-green-200 tracking-wide">SEÃ‡</button></div><p class="text-gray-600 dark:text-gray-300 text-sm mb-6 leading-relaxed">Bitki hastalÄ±ÄŸÄ± tespiti iÃ§in Ã¶zel olarak eÄŸitilmiÅŸ, 12 katmanlÄ± KonvolÃ¼syonel Sinir AÄŸÄ± (CNN) modeli. HÄ±zlÄ± ve internet gerektirmez.</p></div></div><div id="card-gemini" class="bento-card p-8 flex flex-col md:flex-row gap-8 items-start border-l-4 border-l-purple-500 cursor-pointer transition-all hover:bg-purple-50 dark:hover:bg-purple-900/10" onclick="setActiveModel('gemini')"><div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-4xl shadow-xl shrink-0"><i class="fas fa-robot"></i></div><div class="flex-1"><div class="flex items-center gap-4 mb-2"><h3 class="text-2xl font-bold text-gray-900 dark:text-white">Gemini 1.5 Pro</h3><button id="btn-gemini" class="px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-xs font-black border border-gray-200 tracking-wide">SEÃ‡</button></div><p class="text-gray-600 dark:text-gray-300 text-sm mb-6 leading-relaxed">Google'Ä±n en geliÅŸmiÅŸ Ã§ok modlu yapay zeka modeli. GÃ¶rsel analiz yetenekleri ile karmaÅŸÄ±k hastalÄ±klarÄ± tanÄ±mlar.</p><div id="gemini-status-text" class="font-bold text-sm text-green-500">Durum: HazÄ±r (SimÃ¼lasyon/API)</div></div></div></div></section>
        <section id="admin-panel" class="hidden space-y-6 pb-24 scroll-mt-24 fade-in"><div class="flex justify-between items-center mb-8"><h2 class="text-3xl font-extrabold text-gray-900 dark:text-white">YÃ¶netici Paneli</h2><span class="text-xs text-gray-400">Not: Bu panel sadece bu cihazdaki yerel kayÄ±tlarÄ± gÃ¶sterir.</span></div><div class="bento-card overflow-hidden shadow-lg"><table class="w-full text-left text-sm text-gray-600 dark:text-gray-400"><thead class="bg-gray-50 dark:bg-black/20 text-xs font-bold uppercase tracking-wider"><tr><th class="px-8 py-5">KullanÄ±cÄ±</th><th class="px-8 py-5">E-posta</th><th class="px-8 py-5">Rol</th><th class="px-8 py-5">Durum</th><th class="px-8 py-5">Ä°ÅŸlem</th></tr></thead><tbody id="admin-user-list" class="divide-y divide-gray-100 dark:divide-dark-border"></tbody></table></div></section>

        <section id="settings" class="space-y-6 pb-24 scroll-mt-24">
             <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-8">Ayarlar</h2>
             <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bento-card p-8"><h3 class="font-bold text-lg text-gray-900 dark:text-white mb-6 border-b border-gray-100 dark:border-dark-border pb-4">GÃ¶rÃ¼nÃ¼m</h3><div class="grid grid-cols-3 gap-3"><button onclick="setTheme('default')" class="h-12 rounded-xl bg-green-500 shadow-lg"></button><button onclick="setTheme('ocean')" class="h-12 rounded-xl bg-blue-500 shadow-lg"></button><button onclick="setTheme('sunset')" class="h-12 rounded-xl bg-orange-500 shadow-lg"></button><button onclick="setTheme('lavender')" class="h-12 rounded-xl bg-purple-500 shadow-lg"></button><button onclick="setTheme('forest')" class="h-12 rounded-xl bg-[#65a30d] shadow-lg"></button><button onclick="setTheme('fire')" class="h-12 rounded-xl bg-[#ef4444] shadow-lg"></button><button onclick="setTheme('royal')" class="h-12 rounded-xl bg-[#d946ef] shadow-lg"></button><button onclick="setTheme('glacier')" class="h-12 rounded-xl bg-[#06b6d4] shadow-lg"></button><button onclick="setTheme('gamer')" class="h-12 rounded-xl bg-[#1b2838] border border-[#66c0f4] flex items-center justify-center text-white hover:scale-105 transition-transform"><i class="fas fa-gamepad"></i></button><button onclick="setTheme('turkey')" class="h-12 rounded-xl bg-[#E30A17] relative overflow-hidden group hover:scale-105 transition-transform"><div class="absolute inset-0 bg-[url('https://upload.wikimedia.org/wikipedia/commons/b/b4/Flag_of_Turkey.svg')] bg-cover bg-center opacity-40"></div></button><button onclick="setTheme('cyberpunk')" class="col-span-2 h-12 rounded-xl bg-black border border-yellow-400 text-yellow-400 font-black text-xs tracking-widest hover:scale-105 transition-transform">CYBERPUNK</button></div></div>
                <!-- GEMINI API -->
                <div class="bento-card p-8"><h3 class="font-bold text-lg text-gray-900 dark:text-white mb-6 border-b border-gray-100 dark:border-dark-border pb-4">Yapay Zeka YapÄ±landÄ±rmasÄ±</h3><div class="space-y-4"><label class="block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase">Gemini API AnahtarÄ±</label><input type="password" id="gemini-key" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/20 text-sm outline-none dark:text-white" placeholder="AI Studio Key"><button onclick="saveGeminiKey()" class="w-full py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm transition-colors">AnahtarÄ± Kaydet</button></div></div>
                <div class="bento-card p-8"><h3 class="font-bold text-lg text-gray-900 dark:text-white mb-6 border-b border-gray-100 dark:border-dark-border pb-4">Hesap</h3><div class="flex items-center gap-4 mb-6"><img id="settings-avatar" src="" class="w-20 h-20 rounded-full border-4 border-gray-100 dark:border-dark-border"><div><h4 class="font-bold text-xl text-gray-900 dark:text-white">KullanÄ±cÄ±</h4></div></div><button onclick="document.getElementById('avatar-upload').click()" class="text-sm bg-gray-900 text-white px-4 py-2 rounded-lg font-bold hover:bg-gray-800 cursor-pointer">FotoÄŸrafÄ± DeÄŸiÅŸtir</button><input type="file" id="avatar-upload" class="hidden" accept="image/*" onchange="handleAvatarChange(event)"></div>
                <div class="bento-card p-8 col-span-1 lg:col-span-2"><form onsubmit="saveProfileSettings(event)" class="space-y-5"><div class="grid grid-cols-1 md:grid-cols-2 gap-5"><div><label class="block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase">Ad Soyad</label><input type="text" id="settings-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/20 text-sm focus:ring-2 focus:ring-brand-500 outline-none dark:text-gray-200"></div><div><label class="block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 uppercase">E-posta</label><input type="email" id="settings-email" disabled class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border bg-gray-50 dark:bg-white/5 text-sm text-gray-500 cursor-not-allowed"></div></div><div class="pt-4 flex justify-end"><button type="submit" class="px-8 py-3 bg-brand-600 hover:bg-brand-700 text-white rounded-xl text-sm font-bold shadow-lg">Kaydet</button></div></form></div>
             </div>
        </section>

        <section id="about" class="space-y-12 pb-24 scroll-mt-24"><div class="bento-card overflow-hidden"><div class="h-64 bg-gradient-to-r from-brand-600 to-green-400 flex items-center justify-center text-white text-center p-6"><div><i class="fas fa-leaf text-6xl mb-4 drop-shadow-lg"></i><h2 class="text-4xl font-extrabold drop-shadow-md">YZDBTKS</h2><p class="text-lg opacity-90 font-medium">Yapay Zeka Destekli TarÄ±m Teknolojileri</p></div></div><div class="p-10 prose dark:prose-invert max-w-none text-gray-600 dark:text-gray-300 leading-loose text-lg"><p>YZDBTKS, tarÄ±msal verimliliÄŸi artÄ±rmak ve bitki hastalÄ±klarÄ±nÄ± erken evrede tespit etmek amacÄ±yla geliÅŸtirilmiÅŸ yapay zeka tabanlÄ± bir teÅŸhis sistemidir.</p></div></div></section>
        
        <section id="who-we-are" class="space-y-12 pb-24 scroll-mt-24">
            <div class="text-center mb-12"><h2 class="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">Ekibimiz</h2></div>
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8">
                <div class="bento-card p-8 text-center hover:-translate-y-2 transition-transform duration-300 group"><img src="https://ui-avatars.com/api/?name=Ayberk+Arici&background=10b981&color=fff&size=128" class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Ayberk ARICI</h3><p class="text-brand-600 font-bold text-sm mb-4 uppercase tracking-wide">Proje YÃ¶neticisi & Kod</p></div>
                 <div class="bento-card p-8 text-center hover:-translate-y-2 transition-transform duration-300 group"><img src="https://ui-avatars.com/api/?name=Ahmet+Akif+Abus&background=0ea5e9&color=fff&size=128" class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Ahmet Akif ABUÅž</h3><p class="text-blue-600 font-bold text-sm mb-4 uppercase tracking-wide">Backend & Frontend</p></div>
                 <div class="bento-card p-8 text-center hover:-translate-y-2 transition-transform duration-300 group"><img src="https://ui-avatars.com/api/?name=Selim+Erdem&background=8b5cf6&color=fff&size=128" class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Selim ERDEM</h3><p class="text-purple-600 font-bold text-sm mb-4 uppercase tracking-wide">Backend GeliÅŸtirici</p></div>
                 <div class="bento-card p-8 text-center hover:-translate-y-2 transition-transform duration-300 group"><img src="https://ui-avatars.com/api/?name=Ahmet+Ensar+Almak&background=f59e0b&color=fff&size=128" class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Ahmet Ensar ALMAK</h3><p class="text-yellow-600 font-bold text-sm mb-4 uppercase tracking-wide">Backend GeliÅŸtirici</p></div>
            </div>
            <div class="text-center mb-8 mt-12"><h3 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Proje DanÄ±ÅŸmanlarÄ±</h3></div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="bento-card p-8 text-center border-t-4 border-t-red-500"><img src="https://ui-avatars.com/api/?name=Ahmet+Esat+Kalkan&background=ef4444&color=fff&size=128" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Ahmet Esat KALKAN</h3><p class="text-red-500 font-bold text-sm uppercase tracking-wide">BiliÅŸim Ã–ÄŸretmeni</p></div>
                <div class="bento-card p-8 text-center border-t-4 border-t-pink-500"><img src="https://ui-avatars.com/api/?name=Semra+Canpolat&background=ec4899&color=fff&size=128" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-white dark:border-dark-bg shadow-lg"><h3 class="text-xl font-bold text-gray-900 dark:text-white">Semra CANPOLAT</h3><p class="text-pink-500 font-bold text-sm uppercase tracking-wide">BiliÅŸim Ã–ÄŸretmeni</p></div>
            </div>
            <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                <div class="bento-card p-6 text-center">
                    <h3 class="font-bold text-gray-800 dark:text-white mb-4">Sponsorlar</h3>
                    <div class="p-4 bg-gray-50 dark:bg-white/5 rounded-xl w-full border border-gray-200 dark:border-dark-border"><h4 class="font-bold text-brand-600 dark:text-brand-400 text-lg">NOKTA GÄ°YÄ°M</h4><p class="text-xs text-gray-500 uppercase tracking-widest">Sakarya</p></div>
                </div>
                <div class="bento-card p-6">
                    <h3 class="font-bold text-gray-800 dark:text-white mb-4 text-center">Sponsorluk & Ä°letiÅŸim</h3>
                    <div class="space-y-3 text-sm">
                        <a href="mailto:sunaycapa3@gmail.com" class="flex items-center gap-3 p-3 rounded-xl bg-gray-50 dark:bg-white/5 hover:bg-brand-50 dark:hover:bg-brand-900/10 transition-colors"><div class="w-8 h-8 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center"><i class="fas fa-envelope"></i></div><span class="text-gray-600 dark:text-gray-300 text-xs sm:text-sm">sunaycapa3@gmail.com</span></a>
                        <a href="mailto:a.selimerdem0303@gmail.com" class="flex items-center gap-3 p-3 rounded-xl bg-gray-50 dark:bg-white/5 hover:bg-brand-50 dark:hover:bg-brand-900/10 transition-colors"><div class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center"><i class="fas fa-envelope"></i></div><span class="text-gray-600 dark:text-gray-300 text-xs sm:text-sm">a.selimerdem0303@gmail.com</span></a>
                        <a href="mailto:ahmetakifabus91@proton.me" class="flex items-center gap-3 p-3 rounded-xl bg-gray-50 dark:bg-white/5 hover:bg-brand-50 dark:hover:bg-brand-900/10 transition-colors"><div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center"><i class="fas fa-envelope"></i></div><span class="text-gray-600 dark:text-gray-300 text-xs sm:text-sm">ahmetakifabus91@proton.me</span></a>
                        <a href="mailto:yzdbhtks@proton.me" class="flex items-center gap-3 p-3 rounded-xl bg-gray-50 dark:bg-white/5 hover:bg-brand-50 dark:hover:bg-brand-900/10 transition-colors"><div class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center"><i class="fas fa-envelope"></i></div><span class="text-gray-600 dark:text-gray-300 text-xs sm:text-sm">yzdbhtks@proton.me</span></a>
                    </div>
                </div>
            </div>
            <div class="mt-16 text-center text-xs text-gray-400 font-bold tracking-widest pb-10">YZDBTKS &copy; 2026 - TÃ¼m HaklarÄ± SaklÄ±dÄ±r.</div>
        </section>

    </main>

    <!-- AUTH & MODALS -->
    <div id="auth-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm hidden">
        <div class="glass-card w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl relative bg-white dark:bg-gray-900">
            <button onclick="closeModal('auth-modal')" class="absolute top-6 right-6 dark:text-white"><i class="fas fa-times text-xl"></i></button>
            <h2 id="auth-title" class="text-2xl font-bold text-center mb-6 dark:text-white">GiriÅŸ Yap</h2>
            <div class="flex border-b border-gray-200 dark:border-dark-border mb-6"><button id="tab-login" onclick="toggleAuthTab('login')" class="flex-1 pb-2 text-sm font-bold text-brand-600 border-b-2 border-brand-600">GiriÅŸ Yap</button><button id="tab-register" onclick="toggleAuthTab('register')" class="flex-1 pb-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white">KayÄ±t Ol</button></div>
            <form id="form-login" onsubmit="handleLogin(event)" class="space-y-4"><input type="email" id="login-email" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500 transition-colors" placeholder="E-posta"><input type="password" id="login-password" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500 transition-colors" placeholder="Åžifre"><button type="submit" class="w-full py-3 bg-brand-600 text-white font-bold rounded-xl shadow-lg shadow-brand-500/30 hover:scale-[1.02] transition-transform">GÄ°RÄ°Åž YAP</button><div class="text-center"><button type="button" onclick="loginDemo()" class="text-xs font-bold text-gray-500 hover:text-brand-600">Demo GiriÅŸi</button></div></form>
            <form id="form-register" onsubmit="handleRegister(event)" class="space-y-4 hidden"><input type="text" id="reg-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500 transition-colors" placeholder="Ad Soyad"><input type="email" id="reg-email" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500 transition-colors" placeholder="E-posta"><input type="password" id="reg-password" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500 transition-colors" placeholder="Åžifre"><button type="submit" class="w-full py-3 bg-brand-600 text-white font-bold rounded-xl shadow-lg shadow-brand-500/30 hover:scale-[1.02] transition-transform">KAYIT OL</button></form>
        </div>
    </div>
    
    <div id="password-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm hidden"><div class="glass-card w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl relative bg-white dark:bg-gray-900"><button onclick="closeModal('password-modal')" class="absolute top-6 right-6 dark:text-white"><i class="fas fa-times text-xl"></i></button><h2 class="text-xl font-bold text-center mb-6 dark:text-white">Åžifre DeÄŸiÅŸtir</h2><form onsubmit="handleChangePassword(event)" class="space-y-4"><input type="password" id="old-pw" class="w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white border-none" placeholder="Eski Åžifre"><input type="password" id="new-pw" class="w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white border-none" placeholder="Yeni Åžifre"><input type="password" id="confirm-pw" class="w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-800 dark:text-white border-none" placeholder="Yeni Åžifre (Tekrar)"><button type="submit" class="w-full py-3 bg-brand-600 text-white rounded-xl font-bold shadow-lg">GÃœNCELLE</button></form></div></div>
    <div id="add-plant-modal" class="modal fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/50 hidden px-4"><div class="bg-white dark:bg-dark-panel w-full max-w-md rounded-3xl shadow-2xl p-6 md:p-8 relative"><button onclick="closeAddPlantModal()" class="absolute top-4 right-4 text-gray-400"><i class="fas fa-times text-xl"></i></button><h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Bitki Ekle</h2><form onsubmit="handleAddPlant(event)" class="space-y-4"><input type="text" id="plant-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-border dark:bg-black/30 outline-none focus:border-brand-500" placeholder="Bitki AdÄ±" required><div class="flex gap-2"><button type="button" onclick="document.getElementById('plant-image-file').click()" class="flex-1 py-3 bg-gray-100 dark:bg-white/10 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-white/20 transition-colors flex items-center justify-center gap-2"><i class="fas fa-folder-open"></i> Dosya</button><button type="button" onclick="document.getElementById('plant-image-camera').click()" class="flex-1 py-3 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm font-medium hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors flex items-center justify-center gap-2"><i class="fas fa-camera"></i> Ã‡ek</button></div><input type="file" id="plant-image-file" class="hidden" accept="image/*" onchange="previewPlantImage(this)"><input type="file" id="plant-image-camera" class="hidden" accept="image/*" capture="environment" onchange="previewPlantImage(this)"><div id="plant-image-preview-container" class="hidden mt-4 relative rounded-xl overflow-hidden h-40 bg-gray-100"><img id="plant-image-preview" src="" class="w-full h-full object-cover"><button type="button" onclick="downloadPlantPDF()" class="absolute bottom-2 right-2 bg-red-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg flex items-center gap-1"><i class="fas fa-file-pdf"></i> PDF</button></div><button type="submit" class="w-full py-3 bg-brand-600 text-white font-bold rounded-xl shadow-lg mt-4">Kaydet</button></form></div></div>

    <script>
        window.addEventListener('load', () => { setTimeout(() => document.getElementById('global-loader').style.display='none', 800); initDB(); checkAuth(); loadPlants(); loadHistory(); updateModelSelectionUI(); document.getElementById('current-date').innerText = new Date().toLocaleDateString('tr-TR'); });
        
        // ADMIN DB RESET & INIT
        function initDB() { if (!localStorage.getItem('usersDB')) { const defaultUsers = [ { email: "yzdbhtks@proton.me", pass: "2026_yzdbhtks_buyuyor", name: "YZDBHTKS", role: "admin", isVerified: true, avatar: "https://ui-avatars.com/api/?name=YZDBHTKS&background=059669&color=fff" }, { email: "demo@gmail.com", pass: "1a2b3c4d5e", name: "Demo Hesap", role: "user", isVerified: false, avatar: "https://ui-avatars.com/api/?name=Demo&background=3b82f6&color=fff" } ]; localStorage.setItem('usersDB', JSON.stringify(defaultUsers)); } }
        function getUsers() { return JSON.parse(localStorage.getItem('usersDB')); }
        function saveUsers(u) { localStorage.setItem('usersDB', JSON.stringify(u)); }
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

        // --- Model Selection Logic ---
        function setActiveModel(model) {
            localStorage.setItem('activeModel', model);
            updateModelSelectionUI();
            
            // Sync with dashboard dropdown
            const select = document.getElementById('ai-model-select');
            if(select) select.value = model;
        }

        function updateModelSelectionUI() {
            const active = localStorage.getItem('activeModel') || 'local';
            
            // Reset Styles
            document.getElementById('card-local').classList.remove('model-card-active');
            document.getElementById('card-gemini').classList.remove('model-card-active');
            document.getElementById('btn-local').className = "px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-xs font-black border border-gray-200 tracking-wide";
            document.getElementById('btn-local').innerText = "SEÃ‡";
            document.getElementById('btn-gemini').className = "px-3 py-1 rounded-full bg-gray-100 text-gray-500 text-xs font-black border border-gray-200 tracking-wide";
            document.getElementById('btn-gemini').innerText = "SEÃ‡";

            // Apply Active Style
            if(active === 'local') {
                document.getElementById('card-local').classList.add('model-card-active');
                document.getElementById('btn-local').className = "px-3 py-1 rounded-full bg-brand-600 text-white text-xs font-black tracking-wide shadow-md";
                document.getElementById('btn-local').innerText = "KULLANILIYOR";
            } else {
                document.getElementById('card-gemini').classList.add('model-card-active');
                document.getElementById('btn-gemini').className = "px-3 py-1 rounded-full bg-purple-600 text-white text-xs font-black tracking-wide shadow-md";
                document.getElementById('btn-gemini').innerText = "KULLANILIYOR";
            }

            // Sync with dashboard dropdown on load
            const select = document.getElementById('ai-model-select');
            if(select) select.value = active;
        }

        // Auth
        function checkAuth() {
            const area = document.getElementById('desktop-auth');
            const mobileArea = document.getElementById('mobile-auth-container');
            const adminLink = document.getElementById('nav-admin-link');
            const mobileAdminLink = document.getElementById('mobile-admin-link');
            
            const headerAvatar = document.getElementById('header-avatar');
            const mobileHeaderAvatar = document.getElementById('mobile-header-avatar');
            const settingsName = document.getElementById('settings-name');
            const settingsEmail = document.getElementById('settings-email');
            const settingsAvatar = document.getElementById('settings-avatar');
            
            const ddAvatar = document.getElementById('dropdown-avatar');
            const ddName = document.getElementById('dropdown-name');
            const ddEmail = document.getElementById('dropdown-email');
            const verifyBadge = document.getElementById('verify-badge');
            const verifyBtn = document.getElementById('verify-btn');

            if(isLoggedIn && currentUser) {
                const profileHtml = `<div class="relative"><div class="flex items-center gap-3 cursor-pointer" onclick="toggleProfileMenu()"><img src="${currentUser.avatar}" class="w-10 h-10 rounded-full border-2 border-brand-500 object-cover shadow-sm"><div class="hidden lg:block text-right"><p class="text-xs font-bold text-gray-900 dark:text-white truncate max-w-[100px]">${currentUser.name}</p><p class="text-[10px] text-green-500 font-bold uppercase">Ã‡evrimiÃ§i</p></div></div></div>`;
                area.innerHTML = profileHtml;
                mobileArea.innerHTML = `<div class="flex items-center gap-4 p-4 bg-gray-50 dark:bg-white/5 rounded-2xl"><img src="${currentUser.avatar}" class="w-12 h-12 rounded-full border-2 border-brand-500 object-cover"><div class="flex-1"><h4 class="font-bold text-gray-900 dark:text-white truncate">${currentUser.name}</h4><p class="text-xs text-green-500 font-bold uppercase">Ã‡evrimiÃ§i</p></div><button onclick="logout()" class="bg-red-100 text-red-600 p-2 rounded-lg"><i class="fas fa-sign-out-alt"></i></button></div>`;
                
                if(currentUser.role === 'admin') { if(adminLink) adminLink.classList.remove('hidden'); if(mobileAdminLink) mobileAdminLink.classList.remove('hidden'); document.getElementById('admin-panel').classList.remove('hidden'); } else { if(adminLink) adminLink.classList.add('hidden'); if(mobileAdminLink) mobileAdminLink.classList.add('hidden'); }
                if(settingsName) settingsName.value = currentUser.name;
                if(settingsEmail) settingsEmail.value = currentUser.email;
                if(settingsAvatar) settingsAvatar.src = currentUser.avatar;
                if(ddAvatar) ddAvatar.src = currentUser.avatar;
                if(ddName) ddName.innerText = currentUser.name;
                if(ddEmail) ddEmail.innerText = currentUser.email;
                if(verifyBadge) { verifyBadge.className = currentUser.isVerified ? 'text-xs font-bold px-2 py-0.5 rounded-md bg-green-100 text-green-700' : 'text-xs font-bold px-2 py-0.5 rounded-md bg-yellow-100 text-yellow-700'; verifyBadge.innerText = currentUser.isVerified ? 'OnaylÄ±' : 'OnaysÄ±z'; }
                if(verifyBtn) verifyBtn.style.display = currentUser.isVerified ? 'none' : 'flex';
            } else {
                const btns = `<button onclick="openAuthModal('login')" class="px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg font-bold shadow-sm text-xs mr-2">GiriÅŸ Yap</button><button onclick="openAuthModal('register')" class="px-4 py-2 border border-brand-600 text-brand-600 hover:bg-brand-50 dark:hover:bg-white/10 rounded-lg font-bold shadow-sm text-xs">KayÄ±t Ol</button>`;
                area.innerHTML = btns;
                mobileArea.innerHTML = `<button onclick="openAuthModal('login')" class="w-full py-3 bg-brand-600 text-white rounded-2xl font-bold text-lg shadow-lg mb-2">GiriÅŸ Yap</button><button onclick="openAuthModal('register')" class="w-full py-3 bg-white border-2 border-brand-600 text-brand-600 rounded-2xl font-bold text-lg shadow-lg">KayÄ±t Ol</button>`;
                if(adminLink) adminLink.classList.add('hidden');
                if(mobileAdminLink) mobileAdminLink.classList.add('hidden');
            }
        }

        // ... (Existing Functions) ...
        function toggleProfileMenu(){document.getElementById('profile-dropdown').classList.toggle('hidden')}
        document.addEventListener('click',function(e){const dd=document.getElementById('profile-dropdown');const auth=document.getElementById('desktop-auth');if(dd&&!dd.classList.contains('hidden')&&!auth.contains(e.target)){dd.classList.add('hidden');}});
        function handleLogin(e){e.preventDefault();const em=document.getElementById('login-email').value;const pw=document.getElementById('login-password').value;const users=getUsers();const user=users.find(u=>u.email===em&&u.pass===pw);if(u){loginUser(u);}else{alert("HatalÄ±!");}}
        function handleRegister(e){e.preventDefault();const n=document.getElementById('reg-name').value;const em=document.getElementById('reg-email').value;const pw=document.getElementById('reg-pw').value;if(n&&em&&pw){const u={email:em,pass:pw,name:n,role:'user',isVerified:false,avatar:`https://ui-avatars.com/api/?name=${n}`};const db=getUsers();db.push(u);saveUsers(db);loginUser(u);}}
        function loginUser(u){currentUser=u;isLoggedIn=true;localStorage.setItem('isLoggedIn','true');localStorage.setItem('currentUser',JSON.stringify(u));checkAuth();closeModal('auth-modal');alert("GiriÅŸ BaÅŸarÄ±lÄ±!");scrollToSection('dashboard');}
        function logout(){localStorage.removeItem('currentUser');isLoggedIn=false;checkAuth();window.location.reload();}
        function loginDemo(){document.getElementById('login-email').value="demo@gmail.com";document.getElementById('login-password').value="1a2b3c4d5e";handleLogin({preventDefault:()=>{}});}
        function verifyEmail(){if(prompt("Kod (1234):")==="1234"){currentUser.isVerified=true;localStorage.setItem('currentUser',JSON.stringify(currentUser));const u=getUsers();const i=u.findIndex(x=>x.email===currentUser.email);if(i!==-1){u[i].isVerified=true;saveUsers(u);}checkAuth();alert("DoÄŸrulandÄ±!");}}
        function handleChangePassword(e){e.preventDefault();const o=document.getElementById('old-pw').value;const n=document.getElementById('new-pw').value;const cf=document.getElementById('confirm-pw').value;if(nw!==cf)return alert("UyuÅŸmuyor");if(o!==currentUser.pass)return alert("Eski yanlÄ±ÅŸ");currentUser.pass=n;localStorage.setItem('currentUser',JSON.stringify(currentUser));const u=getUsers();const i=u.findIndex(x=>x.email===currentUser.email);if(i!==-1){u[i].pass=n;saveUsers(u);}closeModal('password-modal');alert("DeÄŸiÅŸti");logout();}
        function openChangePasswordModal(){openModal('password-modal');}
        function scrollToSection(id){document.querySelectorAll('section').forEach(s=>{s.classList.add('hidden');s.classList.remove('fade-in');});const t=document.getElementById(id);if(t){t.classList.remove('hidden');t.classList.add('fade-in');window.scrollTo({top:0,behavior:'smooth'});}if(id==='admin-panel')loadAdminUsers();if(id==='history')updateHistoryTable();if(id==='my-plants')updateMyPlantsGrid();document.getElementById('mobile-menu').classList.add('hidden');}
        function switchTab(id){scrollToSection(id);}
        function toggleMobileMenu(){document.getElementById('mobile-menu').classList.toggle('hidden');}
        function openModal(id){document.getElementById(id).classList.remove('hidden');}
        function closeModal(id){document.getElementById(id).classList.add('hidden');}
        function toggleAuthTab(t){if(t==='login'){document.getElementById('form-login').classList.remove('hidden');document.getElementById('form-register').classList.add('hidden');}else{document.getElementById('form-login').classList.add('hidden');document.getElementById('form-register').classList.remove('hidden');}}
        let pendingPlantImg=null;let currentAnalysis=null;
        function openAddPlantModal(){openModal('add-plant-modal');}
        function closeAddPlantModal(){closeModal('add-plant-modal');}
        function previewPlantImage(i){if(i.files[0]){const r=new FileReader();r.onload=e=>{pendingPlantImg=e.target.result;document.getElementById('plant-image-preview').src=pendingPlantImg;document.getElementById('plant-image-preview-container').classList.remove('hidden');};r.readAsDataURL(i.files[0]);}}
        function handleAddPlant(e){e.preventDefault();const n=document.getElementById('plant-name').value;if(n&&pendingPlantImg){let p=JSON.parse(localStorage.getItem('plants')||'[]');p.push({name:n,img:pendingPlantImg,date:new Date().toLocaleDateString()});localStorage.setItem('plants',JSON.stringify(p));loadPlants();closeAddPlantModal();}}
        function loadPlants(){const p=JSON.parse(localStorage.getItem('plants')||'[]');document.getElementById('my-plants-grid').innerHTML=p.map((x,i)=>`<div class="bento-card p-4"><img src="${x.img}" class="w-full h-32 object-cover rounded"><p class="mt-2 font-bold dark:text-white">${x.name}</p><button onclick="delPlant(${i})" class="text-red-500 text-xs">Sil</button></div>`).join('');}
        function delPlant(i){let p=JSON.parse(localStorage.getItem('plants'));p.splice(i,1);localStorage.setItem('plants',JSON.stringify(p));loadPlants();}
        function downloadPlantPDF(){const {jsPDF}=window.jspdf;const d=new jsPDF();d.text("Bitki",10,10);d.addImage(pendingPlantImg,'JPEG',10,20,100,100);d.save('bitki.pdf');}
        function checkGemini(){const k=localStorage.getItem('geminiKey');const t=document.getElementById('gemini-status-text');if(t){if(k){t.innerText="Aktif (API BaÄŸlÄ±)";t.className="font-bold text-sm text-green-600";}else{t.innerText="HazÄ±r (SimÃ¼lasyon Modu)";t.className="font-bold text-sm text-blue-500";}}if(k)document.getElementById('gemini-key').value=k;}
        function saveGeminiKey(){const k=document.getElementById('gemini-key').value;if(k){localStorage.setItem('geminiKey',k);alert("API AnahtarÄ± Kaydedildi!");checkGemini();}}
        async function handleFile(input){if(input.files[0]){const r=new FileReader();r.onload=async(e)=>{document.getElementById('drop-zone').classList.add('hidden');document.getElementById('preview-img').src=e.target.result;document.getElementById('preview-img').classList.remove('hidden');document.getElementById('scanner-overlay').classList.remove('hidden');document.getElementById('res-empty').classList.add('hidden');const apiKey=localStorage.getItem('geminiKey');const base64Data=e.target.result.split(',')[1];const selectedModel=document.getElementById('ai-model-select').value;if(selectedModel==='gemini'&&apiKey){try{const p="Bu bitki yapraÄŸÄ±ndaki hastalÄ±ÄŸÄ± tespit et. Sadece JSON formatÄ±nda cevap ver: {\"title\": \"HastalÄ±k AdÄ±\", \"score\": 95, \"desc\": \"DetaylÄ± aÃ§Ä±klama\", \"action\": \"Tedavi Ã¶nerisi\"}. EÄŸer bitki deÄŸilse title: 'Bitki DeÄŸil' de.";const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:p},{inline_data:{mime_type:"image/jpeg",data:base64Data}}]}]})});const d=await res.json();const t=d.candidates[0].content.parts[0].text;const j=t.replace(/```json/g,'').replace(/```/g,'').trim();showResult(JSON.parse(j),e.target.result);}catch(error){console.error(error);alert("API HatasÄ±! SimÃ¼lasyon moduna geÃ§iliyor.");simulateAnalysis(e.target.result);}}else{setTimeout(()=>simulateAnalysis(e.target.result),2000);}};r.readAsDataURL(input.files[0]);}}
        function resetAnalysis(){document.getElementById('drop-zone').classList.remove('hidden');document.getElementById('preview-img').classList.add('hidden');document.getElementById('res-content').classList.add('hidden');document.getElementById('res-empty').classList.remove('hidden');}
        function simulateAnalysis(img){const d=[{title:"Erken YanÄ±klÄ±k",score:96,desc:"Lekelenme",action:"Ä°laÃ§la"},{title:"SaÄŸlÄ±klÄ±",score:99,desc:"Temiz",action:"Devam"}];const r=d[Math.floor(Math.random()*d.length)];showResult({...r,img},img);}
        function showResult(data,img){document.getElementById('scanner-overlay').classList.add('hidden');document.getElementById('res-content').classList.remove('hidden');currentAnalysis={...data,img:img};document.getElementById('res-title').innerText=data.title;document.getElementById('res-score').innerText="%"+data.score;document.getElementById('res-desc').innerText=data.desc;document.getElementById('res-action').innerText=data.action;let h=JSON.parse(localStorage.getItem('analysisHistory')||'[]');h.unshift({id:'#'+Math.floor(Math.random()*1000),date:new Date().toLocaleDateString(),...currentAnalysis});localStorage.setItem('analysisHistory',JSON.stringify(h));updateHistoryTable();}
        function saveResult(){if(!currentAnalysis)return;const{jsPDF}=window.jspdf;const d=new jsPDF();d.text("Rapor",20,20);d.text(currentAnalysis.title,20,30);d.addImage(currentAnalysis.img,"JPEG",20,40,100,100);d.save("analiz.pdf");alert("Kaydedildi");}
        function updateHistoryTable(){const h=JSON.parse(localStorage.getItem('analysisHistory')||'[]');const b=document.getElementById('history-table-body');if(h.length>0)b.innerHTML=h.map(i=>`<tr><td class="p-2">${i.date}</td><td class="p-2">${i.title}</td><td class="p-2">%${i.score}</td></tr>`).join('');}
        function clearHistory(){localStorage.removeItem('analysisHistory');updateHistoryTable();}
        function loadAdminUsers(){const l=document.getElementById('admin-user-list');l.innerHTML=getUsers().map((u,i)=>`<tr><td class="p-2">${u.name}</td><td class="p-2">${u.email}</td><td class="p-2">${u.role}</td><td class="p-2"><button onclick="deleteUser(${i})" class="text-red-500">Sil</button></td></tr>`).join('');}
        function deleteUser(i){if(confirm('Sil?')) { const u=getUsers(); u.splice(i,1); saveUsers(u); loadAdminUsers(); }}
        function toggleTheme(){document.documentElement.classList.toggle('dark');localStorage.setItem('appTheme',document.documentElement.classList.contains('dark')?'dark':'light');}
        function toggleNotifications(){document.getElementById('notification-panel').classList.toggle('hidden');}
        function setTheme(t){document.documentElement.setAttribute('data-theme',t);localStorage.setItem('appTheme',t);if(t==='cyberpunk')document.documentElement.classList.add('dark');}
        function handleAvatarChange(e){if(e.target.files[0]){const r=new FileReader();r.onload=ev=>{currentUser.avatar=ev.target.result;localStorage.setItem('currentUser',JSON.stringify(currentUser));checkAuth();};r.readAsDataURL(e.target.files[0]);}}
        function saveProfileSettings(e){e.preventDefault();const n=document.getElementById('settings-name').value;if(n){currentUser.name=n;localStorage.setItem('currentUser',JSON.stringify(currentUser));saveUsers(getUsers().map(u=>u.email===currentUser.email?{...u,name:n}:u));checkAuth();alert("Kaydedildi");}}
        document.addEventListener("DOMContentLoaded",()=>{const ctx=document.getElementById('miniChart').getContext('2d');new Chart(ctx,{type:'line',data:{labels:['Pzt','Sal','Ã‡ar','Per','Cum','Cmt','Paz'],datasets:[{data:[12,19,15,25,22,30,42],borderColor:'#10b981',tension:0.4,fill:false}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}});});
        if(localStorage.getItem('appTheme')==='dark') document.documentElement.classList.add('dark');
        if(localStorage.getItem('appTheme')) setTheme(localStorage.getItem('appTheme'));
    </script>
</body>
</html>
